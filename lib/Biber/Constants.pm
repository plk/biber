package Biber::Constants;
use 5.014000;
use strict;
use warnings;

use Encode::Alias;
use Readonly;

use base 'Exporter';

our @EXPORT = qw{
  $CONFIG_DEFAULT_BIBER
  %CONFIG_DEFAULT_BIBLATEX
  %CONFIG_SCOPE_BIBLATEX
  %CONFIG_BIBLATEX_PER_ENTRY_OPTIONS
  %NOSORT_TYPES
  %DM_DATATYPES
  $BIBER_CONF_NAME
  $BIBLATEX_VERSION
  $BIBER_SORT_FINAL
  $BIBER_SORT_NULL
  $LABEL_FINAL
  };

# Version of biblatex which this release works with. Matched against version
# passed in control file
Readonly::Scalar our $BIBLATEX_VERSION => '2.0';

# Global flags needed for sorting
our $BIBER_SORT_FINAL = 0;
our $BIBER_SORT_NULL  = 0;

# the name of the Biber configuration file, which should be
# either returned by kpsewhich or located at "$HOME/.$BIBER_CONF_NAME"
our $BIBER_CONF_NAME = 'biber.conf';

## Biber CONFIGURATION DEFAULTS

# Locale - first try environment ...
my $locale;
if ($ENV{LC_COLLATE}) {
  $locale = $ENV{LC_COLLATE};
}
elsif ($ENV{LANG}) {
  $locale = $ENV{LANG};
}
elsif ($ENV{LC_ALL}) {
  $locale = $ENV{LC_ALL};
}

# ... if nothing, set a default
unless ($locale) {
  if ( $^O =~ /Win/) {
    $locale = 'English_United States.1252';
  }
  else {
    $locale = 'en_US.UTF-8';
  }
}

# nosort type category shortcuts
our %NOSORT_TYPES = (
                     type_name => {
                                   author => 1,
                                   afterword => 1,
                                   annotator => 1,
                                   bookauthor => 1,
                                   commentator => 1,
                                   editor => 1,
                                   editora => 1,
                                   editorb => 1,
                                   editorc => 1,
                                   foreword => 1,
                                   holder => 1,
                                   introduction => 1,
                                   namea => 1,
                                   nameb => 1,
                                   namec => 1,
                                   shortauthor => 1,
                                   shorteditor => 1,
                                   translator => 1
                                  },
                     type_title => {
                                    booktitle => 1,
                                    eventtitle => 1,
                                    issuetitle => 1,
                                    journaltitle => 1,
                                    maintitle => 1,
                                    origtitle => 1,
                                    title => 1
                                   }
);

# datatypes for data model validation
our %DM_DATATYPES = (
                            integer => qr/\A\d+\z/xms
);

# Biber option defaults. Not really needed since they are passed by .bcf but
# useful to know the format. Also needed for options not yet passed in .bcf by biblatex

our $CONFIG_DEFAULT_BIBER = {
  bblencoding        => { content => 'UTF-8' },
  bibencoding        => { content => 'UTF-8' },
  bblsafechars       => { content => 0 },
  bblsafecharsset    => { content => 'base' },
  bltxml             => { content => 0 },
  collate            => { content => 1 },
  collate_options    => { option => [ { name => 'level', value => 4 } ] },
  graph              => { content => 0 },
  debug              => { content => 0 },
  decodecharsset     => { content => 'base' },
  fastsort           => { content => 0 },
  fixinits           => { content => 0 },
  mincrossrefs       => { content => 2 },
  nodieonerror       => { content => 0 },
  noinit             => { option => [ {value => q/\b\p{Ll}{2}\p{Pd}/} ,
                                      {value => q/[\x{2bf}\x{2018}]/} ] },
  nolog              => { content => 0 },
  nostdmacros        => { content => 0 },
  nosort             => { option => [ { name => 'type_name', value => q/\A\p{L}{2}\p{Pd}/ },
                                      { name => 'type_name', value => q/[\x{2bf}\x{2018}]/ } ] },
  onlylog            => { content => 0 },
  quiet              => { content => 0 },
  sortcase           => { content => 1 },
  sortfirstinits     => { content => 0 },
  sortlocale         => { content => $locale },
  sortupper          => { content => 1 },
  trace              => { content => 0 },
  validate_config    => { content => 0 },
  validate_control   => { content => 0 },
  validate_datamodel => { content => 0 },
  wraplines          => { content => 0 },
};

# default global options for biblatex
# in practice these will be obtained from the control file,
# but we need this for things not yet implemented by biblatex but expected by biber
our %CONFIG_DEFAULT_BIBLATEX =
  (
  "sourcemap"          => {
                            maps => [
                              {
                                datatype => "bibtex",
                                driver_defaults => 1,
                                map => [
                                  {
                                    map_step => [
                                      { map_type_source => "conference", map_type_target => "inproceedings" },
                                      { map_type_source => "electronic", map_type_target => "online" },
                                      { map_type_source => "www", map_type_target => "online" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      {
                                        map_final       => 1,
                                        map_type_source => "mastersthesis",
                                        map_type_target => "thesis",
                                      },
                                      { map_field_set => "type", map_field_value => "mathesis" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      {
                                        map_final       => 1,
                                        map_type_source => "phdthesis",
                                        map_type_target => "thesis",
                                      },
                                      { map_field_set => "type", map_field_value => "phdthesis" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      {
                                        map_final       => 1,
                                        map_type_source => "techreport",
                                        map_type_target => "report",
                                      },
                                      { map_field_set => "type", map_field_value => "techreport" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      { map_field_source => "address", map_field_target => "location" },
                                      { map_field_source => "school", map_field_target => "institution" },
                                      { map_field_source => "annote", map_field_target => "annotation" },
                                      {
                                        map_field_source => "archiveprefix",
                                        map_field_target => "eprinttype",
                                      },
                                      { map_field_source => "journal", map_field_target => "journaltitle" },
                                      {
                                        map_field_source => "primaryclass",
                                        map_field_target => "eprintclass",
                                      },
                                      { map_field_source => "key", map_field_target => "sortkey" },
                                      { map_field_source => "pdf", map_field_target => "file" },
                                    ],
                                  },
                                ],
                              },
                              {
                                datatype => "endnotexml",
                                driver_defaults => 1,
                                map => [
                                  {
                                    map_step => [
                                      { map_type_source => "Aggregated Database", map_type_target => "misc" },
                                      { map_type_source => "Ancient Text", map_type_target => "misc" },
                                      { map_type_source => "Artwork", map_type_target => "artwork" },
                                      {
                                        map_type_source => "Audiovisual Material",
                                        map_type_target => "misc",
                                      },
                                      { map_type_source => "Bill", map_type_target => "jurisdiction" },
                                      { map_type_source => "Blog", map_type_target => "online" },
                                      { map_type_source => "Book", map_type_target => "book" },
                                      { map_type_source => "Book Section", map_type_target => "inbook" },
                                      { map_type_source => "Case", map_type_target => "jurisdiction" },
                                      { map_type_source => "Catalog", map_type_target => "misc" },
                                      { map_type_source => "Chart or Table", map_type_target => "misc" },
                                      { map_type_source => "Classical Work", map_type_target => "misc" },
                                      {
                                        map_type_source => "Computer Program",
                                        map_type_target => "software",
                                      },
                                      {
                                        map_type_source => "Conference Paper",
                                        map_type_target => "inproceedings",
                                      },
                                      {
                                        map_type_source => "Conference Proceedings",
                                        map_type_target => "proceedings",
                                      },
                                      { map_type_source => "Dictionary", map_type_target => "inreference" },
                                      { map_type_source => "Edited Book", map_type_target => "collection" },
                                      {
                                        map_type_source => "Electronic Article",
                                        map_type_target => "article",
                                      },
                                      { map_type_source => "Electronic Book", map_type_target => "book" },
                                      { map_type_source => "Encyclopedia", map_type_target => "reference" },
                                      { map_type_source => "Equation", map_type_target => "misc" },
                                      { map_type_source => "Figure", map_type_target => "misc" },
                                      { map_type_source => "Film or Broadcast", map_type_target => "movie" },
                                      {
                                        map_type_source => "Government Document",
                                        map_type_target => "report",
                                      },
                                      { map_type_source => "Grant", map_type_target => "misc" },
                                      { map_type_source => "Hearing", map_type_target => "jurisdiction" },
                                      { map_type_source => "Journal Article", map_type_target => "article" },
                                      {
                                        map_type_source => "Legal Rule or Regulation",
                                        map_type_target => "legislation",
                                      },
                                      { map_type_source => "Magazine Article", map_type_target => "article" },
                                      { map_type_source => "Manuscript", map_type_target => "unpublished" },
                                      { map_type_source => "Map", map_type_target => "misc" },
                                      {
                                        map_type_source => "Newspaper Article",
                                        map_type_target => "article",
                                      },
                                      { map_type_source => "Online Database", map_type_target => "online" },
                                      { map_type_source => "Online Multimedia", map_type_target => "online" },
                                      { map_type_source => "Pamphlet", map_type_target => "booklet" },
                                      { map_type_source => "Patent", map_type_target => "patent" },
                                      {
                                        map_type_source => "Personal Communication",
                                        map_type_target => "letter",
                                      },
                                      { map_type_source => "Report", map_type_target => "report" },
                                      { map_type_source => "Serial", map_type_target => "periodical" },
                                      { map_type_source => "Standard", map_type_target => "standard" },
                                      { map_type_source => "Statute", map_type_target => "legislation" },
                                      { map_type_source => "Thesis", map_type_target => "thesis" },
                                      {
                                        map_type_source => "Unpublished Work",
                                        map_type_target => "unpublished",
                                      },
                                      { map_type_source => "Web Page", map_type_target => "online" },
                                    ],
                                  },
                                  {
                                    map_overwrite => 1,
                                    map_step => [
                                      {
                                        map_field_source => "electronic-resource-num",
                                        map_field_target => "eprint",
                                      },
                                      {
                                        map_field_source => "titles/alt-title",
                                        map_field_target => "titles/shorttitle",
                                      },
                                      {
                                        map_field_source => "titles/secondary-title",
                                        map_field_target => "titles/subtitle",
                                      },
                                      { map_field_source => "meeting-place", map_field_target => "venue" },
                                      { map_field_source => "pub-location", map_field_target => "location" },
                                      { map_field_source => "orig-pub", map_field_target => "origpublisher" },
                                      {
                                        map_field_source => "contributors/authors",
                                        map_field_target => "contributors/author",
                                      },
                                      {
                                        map_field_source => "contributors/secondary-authors",
                                        map_field_target => "contributors/editor",
                                      },
                                      {
                                        map_field_source => "contributors/tertiary-authors",
                                        map_field_target => "contributors/commentator",
                                      },
                                      {
                                        map_field_source => "contributors/subsidiary-authors",
                                        map_field_target => "contributors/translator",
                                      },
                                      { map_field_source => "dates/year", map_field_target => "dates/date" },
                                      {
                                        map_field_source => "dates/pub-dates",
                                        map_field_target => "dates/date",
                                      },
                                      { map_field_source => "num-vols", map_field_target => "volumes" },
                                      { map_field_source => "call-num", map_field_target => "library" },
                                      { map_field_source => "notes", map_field_target => "note" },
                                      { map_field_source => "work-type", map_field_target => "type" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "contributors/authors",
                                                    map_field_target => "contributors/editor",
                                                  },
                                                ],
                                    per_type => [{ content => "Edited Book" }],
                                  },
                                  {
                                    map_step => [{ map_field_source => "isbn", map_field_target => "issn" }],
                                    per_type => [
                                                  { content => "Electronic Article" },
                                                  { content => "Journal Article" },
                                                  { content => "Magazine Article" },
                                                  { content => "Newspaper Article" },
                                                ],
                                  },
                                  {
                                    map_step => [{ map_field_source => "isbn", map_field_target => "number" }],
                                    per_type => [
                                                  { content => "Patent" },
                                                  { content => "Report" },
                                                  { content => "Government Document" },
                                                  { content => "Legal Rule or Regulation" },
                                                ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/secondary-title",
                                                    map_field_target => "titles/title",
                                                  },
                                                ],
                                    per_type => [
                                                  { content => "Blog" },
                                                  { content => "Online Database" },
                                                  { content => "Online Multimedia" },
                                                  { content => "Web Page" },
                                                ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/secondary-title",
                                                    map_field_target => "titles/booktitle",
                                                  },
                                                ],
                                    per_type => [{ content => "Book Section" }],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/secondary-title",
                                                    map_field_target => "titles/series",
                                                  },
                                                ],
                                    per_type => [
                                                  { content => "Book" },
                                                  { content => "Electronic Book" },
                                                  { content => "Manuscript" },
                                                  { content => "Unpublished Work" },
                                                ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/secondary-title",
                                                    map_field_target => "titles/eventtitle",
                                                  },
                                                ],
                                    per_type => [
                                                  { content => "Conference Paper" },
                                                  { content => "Conference Proceedings" },
                                                ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/secondary-title",
                                                    map_field_target => "titles/journaltitle",
                                                  },
                                                ],
                                    per_type => [
                                                  { content => "Electronic Article" },
                                                  { content => "Journal Article" },
                                                  { content => "Magazine Article" },
                                                  { content => "Newspaper Article" },
                                                ],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/tertiary-title",
                                                    map_field_target => "titles/booktitle",
                                                  },
                                                ],
                                    per_type => [{ content => "Book Section" }],
                                  },
                                  {
                                    map_step => [
                                                  {
                                                    map_field_source => "titles/tertiary-title",
                                                    map_field_target => "titles/series",
                                                  },
                                                ],
                                    per_type => [
                                                  { content => "Conference Proceedings" },
                                                  { content => "periodical" },
                                                ],
                                  },
                                ],
                              },
                              {
                                datatype => "ris",
                                driver_defaults => 1,
                                map => [
                                  {
                                    map_step => [
                                      { map_type_source => "ART", map_type_target => "artwork" },
                                      { map_type_source => "BILL", map_type_target => "jurisdiction" },
                                      { map_type_source => "BOOK", map_type_target => "book" },
                                      { map_type_source => "CHAP", map_type_target => "inbook" },
                                      { map_type_source => "COMP", map_type_target => "software" },
                                      { map_type_source => "CONF", map_type_target => "proceedings" },
                                      { map_type_source => "GEN", map_type_target => "misc" },
                                      { map_type_source => "JFULL", map_type_target => "article" },
                                      { map_type_source => "JOUR", map_type_target => "article" },
                                      { map_type_source => "MGZN", map_type_target => "misc" },
                                      { map_type_source => "MPCT", map_type_target => "movie" },
                                      { map_type_source => "NEWS", map_type_target => "misc" },
                                      { map_type_source => "PAMP", map_type_target => "misc" },
                                      { map_type_source => "PAT", map_type_target => "patent" },
                                      { map_type_source => "PCOMM", map_type_target => "misc" },
                                      { map_type_source => "RPRT", map_type_target => "report" },
                                      { map_type_source => "SER", map_type_target => "misc" },
                                      { map_type_source => "SLIDE", map_type_target => "misc" },
                                      { map_type_source => "SOUND", map_type_target => "audio" },
                                      { map_type_source => "STAT", map_type_target => "legal" },
                                      { map_type_source => "THES", map_type_target => "thesis" },
                                      { map_type_source => "UNBILL", map_type_target => "jurisdiction" },
                                      { map_type_source => "UNPB", map_type_target => "unpublished" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      { map_field_source => "Y1", map_field_target => "date" },
                                      { map_field_source => "PY", map_field_target => "date" },
                                      { map_field_source => "Y2", map_field_target => "eventdate" },
                                      { map_field_source => "A1", map_field_target => "author" },
                                      { map_field_source => "AU", map_field_target => "author" },
                                      { map_field_source => "A2", map_field_target => "editor" },
                                      { map_field_source => "A3", map_field_target => "editor" },
                                      { map_field_source => "ED", map_field_target => "editor" },
                                      { map_field_source => "SPEP", map_field_target => "pages" },
                                      { map_field_source => "N1", map_field_target => "note" },
                                      { map_field_source => "N2", map_field_target => "abstract" },
                                      { map_field_source => "AB", map_field_target => "abstract" },
                                      { map_field_source => "JO", map_field_target => "journaltitle" },
                                      { map_field_source => "JF", map_field_target => "journaltitle" },
                                      { map_field_source => "JA", map_field_target => "shortjournal" },
                                      { map_field_source => "VL", map_field_target => "volume" },
                                      { map_field_source => "IS", map_field_target => "issue" },
                                      { map_field_source => "CP", map_field_target => "issue" },
                                      { map_field_source => "CY", map_field_target => "location" },
                                      { map_field_source => "SN", map_field_target => "isbn" },
                                      { map_field_source => "PB", map_field_target => "publisher" },
                                      { map_field_source => "KW", map_field_target => "keywords" },
                                      { map_field_source => "TI", map_field_target => "title" },
                                      { map_field_source => "U1", map_field_target => "usera" },
                                      { map_field_source => "U2", map_field_target => "userb" },
                                      { map_field_source => "U3", map_field_target => "userc" },
                                      { map_field_source => "U4", map_field_target => "userd" },
                                      { map_field_source => "U5", map_field_target => "usere" },
                                      { map_field_source => "UR", map_field_target => "url" },
                                      { map_field_source => "L1", map_field_target => "file" },
                                    ],
                                  },
                                ],
                              },
                              {
                                datatype => "zoterordfxml",
                                driver_defaults => 1,
                                map => [
                                  {
                                    map_step => [
                                      {
                                        map_type_source => "conferencePaper",
                                        map_type_target => "inproceedings",
                                      },
                                      { map_type_source => "bookSection", map_type_target => "inbook" },
                                      { map_type_source => "journalArticle", map_type_target => "article" },
                                      { map_type_source => "magazineArticle", map_type_target => "article" },
                                      { map_type_source => "newspaperArticle", map_type_target => "article" },
                                      {
                                        map_type_source => "encyclopediaArticle",
                                        map_type_target => "inreference",
                                      },
                                      { map_type_source => "manuscript", map_type_target => "unpublished" },
                                      { map_type_source => "document", map_type_target => "misc" },
                                      {
                                        map_type_source => "dictionaryEntry",
                                        map_type_target => "inreference",
                                      },
                                      { map_type_source => "interview", map_type_target => "misc" },
                                      { map_type_source => "film", map_type_target => "movie" },
                                      { map_type_source => "webpage", map_type_target => "online" },
                                      { map_type_source => "note", map_type_target => "misc" },
                                      { map_type_source => "attachment", map_type_target => "misc" },
                                      { map_type_source => "bill", map_type_target => "legislation" },
                                      { map_type_source => "case", map_type_target => "jurisdiction" },
                                      { map_type_source => "hearing", map_type_target => "jurisdiction" },
                                      { map_type_source => "statute", map_type_target => "legislation" },
                                      { map_type_source => "email", map_type_target => "letter" },
                                      { map_type_source => "map", map_type_target => "image" },
                                      { map_type_source => "blogPost", map_type_target => "online" },
                                      { map_type_source => "instantMessage", map_type_target => "letter" },
                                      { map_type_source => "forumPost", map_type_target => "online" },
                                      { map_type_source => "audioRecording", map_type_target => "audio" },
                                      {
                                        map_type_source => "presentation",
                                        map_type_target => "inproceedings",
                                      },
                                      { map_type_source => "videoRecording", map_type_target => "video" },
                                      { map_type_source => "tvBroadcast", map_type_target => "misc" },
                                      { map_type_source => "radioBroadcast", map_type_target => "misc" },
                                      { map_type_source => "podcast", map_type_target => "online" },
                                      { map_type_source => "computerProgram", map_type_target => "software" },
                                    ],
                                  },
                                  {
                                    map_step => [
                                      {
                                        map_field_source => "bib:contributors",
                                        map_field_target => "author",
                                      },
                                      { map_field_source => "bib:authors", map_field_target => "author" },
                                      { map_field_source => "z:interviewers", map_field_target => "author" },
                                      { map_field_source => "z:directors", map_field_target => "author" },
                                      { map_field_source => "z:scriptwriters", map_field_target => "author" },
                                      { map_field_source => "z:bookAuthor", map_field_target => "author" },
                                      { map_field_source => "z:inventors", map_field_target => "author" },
                                      { map_field_source => "z:recipients", map_field_target => "author" },
                                      { map_field_source => "z:counsels", map_field_target => "author" },
                                      { map_field_source => "z:artists", map_field_target => "author" },
                                      { map_field_source => "z:podcasters", map_field_target => "author" },
                                      { map_field_source => "z:presenters", map_field_target => "author" },
                                      { map_field_source => "z:commenters", map_field_target => "author" },
                                      { map_field_source => "z:programers", map_field_target => "author" },
                                      { map_field_source => "z:composers", map_field_target => "author" },
                                      { map_field_source => "z:producers", map_field_target => "author" },
                                      { map_field_source => "z:performers", map_field_target => "author" },
                                      { map_field_source => "bib:editors", map_field_target => "editor" },
                                      {
                                        map_field_source => "z:translators",
                                        map_field_target => "translator",
                                      },
                                      { map_field_source => "z:seriesEditors", map_field_target => "editor" },
                                      { map_field_source => "dc:date", map_field_target => "date" },
                                      { map_field_source => "bib:pages", map_field_target => "pages" },
                                      { map_field_source => "dc:title", map_field_target => "title" },
                                      {
                                        map_field_source => "z:proceedingsTitle",
                                        map_field_target => "title",
                                      },
                                      {
                                        map_field_source => "z:encyclopediaTitle",
                                        map_field_target => "title",
                                      },
                                      {
                                        map_field_source => "z:dictionaryTitle",
                                        map_field_target => "title",
                                      },
                                      { map_field_source => "z:websiteTitle", map_field_target => "title" },
                                      { map_field_source => "z:forumTitle", map_field_target => "title" },
                                      { map_field_source => "z:blogTitle", map_field_target => "title" },
                                      { map_field_source => "z:nameOfAct", map_field_target => "title" },
                                      { map_field_source => "z:caseName", map_field_target => "title" },
                                      {
                                        map_field_source => "z:meetingName",
                                        map_field_target => "eventtitle",
                                      },
                                      { map_field_source => "prism:volume", map_field_target => "volume" },
                                      {
                                        map_field_source => "numberOfVolumes",
                                        map_field_target => "volumes",
                                      },
                                      { map_field_source => "z:numPages", map_field_target => "pagetotal" },
                                      { map_field_source => "prism:edition", map_field_target => "edition" },
                                      { map_field_source => "dc:description", map_field_target => "note" },
                                      {
                                        map_field_source => "dc:alternative",
                                        map_field_target => "shortjournal",
                                      },
                                      {
                                        map_field_source => "dcterms:abstract",
                                        map_field_target => "abstract",
                                      },
                                      { map_field_source => "dc:type", map_field_target => "type" },
                                      {
                                        map_field_source => "z:shortTitle",
                                        map_field_target => "shorttitle",
                                      },
                                      { map_field_source => "z:bookTitle", map_field_target => "booktitle" },
                                      { map_field_source => "prism:number", map_field_target => "number" },
                                      { map_field_source => "z:patentNumber", map_field_target => "number" },
                                      { map_field_source => "z:codeNumber", map_field_target => "number" },
                                      { map_field_source => "z:reportNumber", map_field_target => "number" },
                                      { map_field_source => "z:billNumber", map_field_target => "number" },
                                      {
                                        map_field_source => "z:documentNumber",
                                        map_field_target => "number",
                                      },
                                      {
                                        map_field_source => "z:publicLawNumber",
                                        map_field_target => "number",
                                      },
                                      {
                                        map_field_source => "z:applicationNumber",
                                        map_field_target => "number",
                                      },
                                      { map_field_source => "z:episodeNumber", map_field_target => "number" },
                                      { map_field_source => "dc:coverage", map_field_target => "location" },
                                      {
                                        map_field_source => "z:university",
                                        map_field_target => "institution",
                                      },
                                      { map_field_source => "z:language", map_field_target => "language" },
                                      { map_field_source => "z:version", map_field_target => "version" },
                                      {
                                        map_field_source => "z:libraryCatalog",
                                        map_field_target => "library",
                                      },
                                      { map_field_source => "dcterms:isPartOf", map_field_target => "usera" },
                                      { map_field_source => "dc:identifier", map_field_target => "userb" },
                                      { map_field_source => "dc:publisher", map_field_target => "userc" },
                                      { map_field_source => "bib:presentedAt", map_field_target => "userd" },
                                      { map_field_source => "dc:subject", map_field_target => "usere" },
                                      {
                                        map_field_source => "dcterms:usera/bib:Journal",
                                        map_field_target => "dcterms:usera/periodical",
                                      },
                                      {
                                        map_field_source => "dcterms:usera/bib:Book",
                                        map_field_target => "dcterms:usera/book",
                                      },
                                      {
                                        map_field_source => "dcterms:usera/bib:ConferenceProceedings",
                                        map_field_target => "dcterms:usera/proceedings",
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
   labelalphatemplate => {
  labelelement => [
             {
               labelpart => [
                 { content => "shorthand", final => 1 },
                 { content => "label" },
                 {
                   content         => "labelname",
                   ifnamecount     => 1,
                   substring_side  => "left",
                   substring_width => 3,
                 },
                 { content => "labelname", substring_side => "left", substring_width => 1, substring_compound => 1 },
               ],
               order => 1,
             },
             {
               labelpart => [
                 { content => "year", substring_side => "right", substring_width => 2 },
               ],
               order => 2,
             },
           ],
  type  => "global",
},
  datamodel          => {
                            constraints => [
                                             {
                                               constraint => [
                                                               {
                                                                 fieldxor => [
                                                                   {
                                                                     field => [
                                                                       { coerce => "true", content => "date" },
                                                                       { content => "year" },
                                                                     ],
                                                                   },
                                                                 ],
                                                                 type => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [
                                                               { content => "article" },
                                                               { content => "book" },
                                                               { content => "inbook" },
                                                               { content => "bookinbook" },
                                                               { content => "suppbook" },
                                                               { content => "booklet" },
                                                               { content => "collection" },
                                                               { content => "incollection" },
                                                               { content => "suppcollection" },
                                                               { content => "manual" },
                                                               { content => "misc" },
                                                               { content => "mvbook" },
                                                               { content => "mvcollection" },
                                                               { content => "online" },
                                                               { content => "patent" },
                                                               { content => "periodical" },
                                                               { content => "suppperiodical" },
                                                               { content => "proceedings" },
                                                               { content => "inproceedings" },
                                                               { content => "reference" },
                                                               { content => "inreference" },
                                                               { content => "report" },
                                                               { content => "set" },
                                                               { content => "thesis" },
                                                               { content => "unpublished" },
                                                             ],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "entryset" }, { content => "crossref" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "set" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "journaltitle" },
                                                                            { content => "title" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "article" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "author" }, { content => "title" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [
                                                               { content => "book" },
                                                               { content => "mvbook" },
                                                               { content => "mvcollection" },
                                                               { content => "mvreference" },
                                                             ],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "title" },
                                                                            { content => "booktitle" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [
                                                               { content => "inbook" },
                                                               { content => "bookinbook" },
                                                               { content => "suppbook" },
                                                             ],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field   => [{ content => "title" }],
                                                                 fieldor => [
                                                                              { field => [{ content => "author" }, { content => "editor" }] },
                                                                            ],
                                                                 type    => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "booklet" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "editor" }, { content => "title" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "collection" }, { content => "reference" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "editor" },
                                                                            { content => "title" },
                                                                            { content => "booktitle" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [
                                                               { content => "incollection" },
                                                               { content => "suppcollection" },
                                                               { content => "inreference" },
                                                             ],
                                             },
                                             {
                                               constraint => [{ field => [{ content => "title" }], type => "mandatory" }],
                                               entrytype  => [{ content => "manual" }],
                                             },
                                             {
                                               constraint => [{ field => [{ content => "title" }], type => "mandatory" }],
                                               entrytype  => [{ content => "misc" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "title" }, { content => "url" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "online" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "title" },
                                                                            { content => "number" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "patent" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "editor" }, { content => "title" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "periodical" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "editor" }, { content => "title" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "proceedings" }, { content => "mvproceedings" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "editor" },
                                                                            { content => "title" },
                                                                            { content => "booktitle" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "inproceedings" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "title" },
                                                                            { content => "type" },
                                                                            { content => "institution" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "report" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [
                                                                            { content => "author" },
                                                                            { content => "title" },
                                                                            { content => "type" },
                                                                            { content => "institution" },
                                                                          ],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "thesis" }],
                                             },
                                             {
                                               constraint => [
                                                               {
                                                                 field => [{ content => "author" }, { content => "title" }],
                                                                 type  => "mandatory",
                                                               },
                                                             ],
                                               entrytype  => [{ content => "unpublished" }],
                                             },
                                           ],
                            entryfields => [
                                             {
                                               entrytype => [{ content => "ALL" }],
                                               field => [
                                                 { content => "abstract" },
                                                 { content => "annotation" },
                                                 { content => "authortype" },
                                                 { content => "bookpagination" },
                                                 { content => "crossref" },
                                                 { content => "entryset" },
                                                 { content => "entrysubtype" },
                                                 { content => "execute" },
                                                 { content => "file" },
                                                 { content => "gender" },
                                                 { content => "hyphenation" },
                                                 { content => "ids" },
                                                 { content => "indextitle" },
                                                 { content => "indexsorttitle" },
                                                 { content => "isan" },
                                                 { content => "ismn" },
                                                 { content => "iswc" },
                                                 { content => "keywords" },
                                                 { content => "label" },
                                                 { content => "library" },
                                                 { content => "lista" },
                                                 { content => "listb" },
                                                 { content => "listc" },
                                                 { content => "listd" },
                                                 { content => "liste" },
                                                 { content => "listf" },
                                                 { content => "nameaddon" },
                                                 { content => "options" },
                                                 { content => "origday" },
                                                 { content => "origendday" },
                                                 { content => "origendmonth" },
                                                 { content => "origendyear" },
                                                 { content => "origmonth" },
                                                 { content => "origyear" },
                                                 { content => "origlocation" },
                                                 { content => "origpublisher" },
                                                 { content => "origtitle" },
                                                 { content => "pagination" },
                                                 { content => "presort" },
                                                 { content => "related" },
                                                 { content => "relatedtype" },
                                                 { content => "relatedstring" },
                                                 { content => "shortauthor" },
                                                 { content => "shorteditor" },
                                                 { content => "shorthand" },
                                                 { content => "shorthandintro" },
                                                 { content => "shortjournal" },
                                                 { content => "shortseries" },
                                                 { content => "shorttitle" },
                                                 { content => "sortkey" },
                                                 { content => "sortname" },
                                                 { content => "sortshorthand" },
                                                 { content => "sorttitle" },
                                                 { content => "sortyear" },
                                                 { content => "usera" },
                                                 { content => "userb" },
                                                 { content => "userc" },
                                                 { content => "userd" },
                                                 { content => "usere" },
                                                 { content => "userf" },
                                                 { content => "verba" },
                                                 { content => "verbb" },
                                                 { content => "verbc" },
                                                 { content => "xdata" },
                                                 { content => "xref" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "set" }],
                                               field => [{ content => "entryset" }, { content => "crossref" }],
                                             },
                                             {
                                               entrytype => [{ content => "article" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "journaltitle" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "annotator" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "editor" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eid" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "issn" },
                                                 { content => "issue" },
                                                 { content => "issuetitle" },
                                                 { content => "issuesubtitle" },
                                                 { content => "journalsubtitle" },
                                                 { content => "language" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "pages" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                                 { content => "volume" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "bibnote" }],
                                               field => [{ content => "note" }],
                                             },
                                             {
                                               entrytype => [{ content => "book" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "chapter" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editor" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "mainsubtitle" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "mvbook" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editor" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [
                                                 { content => "inbook" },
                                                 { content => "bookinbook" },
                                                 { content => "suppbook" },
                                               ],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "booktitle" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "bookauthor" },
                                                 { content => "booksubtitle" },
                                                 { content => "booktitleaddon" },
                                                 { content => "chapter" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editor" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "mainsubtitle" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pages" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "booklet" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "howpublished" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "type" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "collection" }, { content => "reference" }],
                                               field => [
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "chapter" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "mainsubtitle" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "mvcollection" }, { content => "mvreference" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editor" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [
                                                 { content => "incollection" },
                                                 { content => "suppcollection" },
                                                 { content => "inreference" },
                                               ],
                                               field => [
                                                 { content => "author" },
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "booktitle" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "afterword" },
                                                 { content => "annotator" },
                                                 { content => "booksubtitle" },
                                                 { content => "booktitleaddon" },
                                                 { content => "chapter" },
                                                 { content => "commentator" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "foreword" },
                                                 { content => "introduction" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "mainsubtitle" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "origlanguage" },
                                                 { content => "pages" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "translator" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "manual" }],
                                               field => [
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "author" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "edition" },
                                                 { content => "editor" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "organization" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "type" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "misc" }],
                                               field => [
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "author" },
                                                 { content => "doi" },
                                                 { content => "editor" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "howpublished" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "organization" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "type" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "online" }],
                                               field => [
                                                 { content => "title" },
                                                 { content => "url" },
                                                 { content => "addendum" },
                                                 { content => "author" },
                                                 { content => "editor" },
                                                 { content => "language" },
                                                 { content => "month" },
                                                 { content => "note" },
                                                 { content => "organization" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                                 { content => "year" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "patent" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "number" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "holder" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "type" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "periodical" }],
                                               field => [
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "doi" },
                                                 { content => "editora" },
                                                 { content => "editorb" },
                                                 { content => "editorc" },
                                                 { content => "editoratype" },
                                                 { content => "editorbtype" },
                                                 { content => "editorctype" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "issn" },
                                                 { content => "issue" },
                                                 { content => "issuesubtitle" },
                                                 { content => "issuetitle" },
                                                 { content => "language" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "volume" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "mvproceedings" }],
                                               field => [
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "eventday" },
                                                 { content => "eventendday" },
                                                 { content => "eventendmonth" },
                                                 { content => "eventendyear" },
                                                 { content => "eventmonth" },
                                                 { content => "eventyear" },
                                                 { content => "eventtitle" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "organization" },
                                                 { content => "pagetotal" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "venue" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "proceedings" }],
                                               field => [
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "eventday" },
                                                 { content => "eventendday" },
                                                 { content => "eventendmonth" },
                                                 { content => "eventendyear" },
                                                 { content => "eventmonth" },
                                                 { content => "eventyear" },
                                                 { content => "eventtitle" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "mainsubtitle" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "organization" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "venue" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "inproceedings" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "editor" },
                                                 { content => "title" },
                                                 { content => "booktitle" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "booksubtitle" },
                                                 { content => "booktitleaddon" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "eventday" },
                                                 { content => "eventendday" },
                                                 { content => "eventendmonth" },
                                                 { content => "eventendyear" },
                                                 { content => "eventmonth" },
                                                 { content => "eventyear" },
                                                 { content => "eventtitle" },
                                                 { content => "isbn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "mainsubtitle" },
                                                 { content => "maintitle" },
                                                 { content => "maintitleaddon" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "organization" },
                                                 { content => "pages" },
                                                 { content => "part" },
                                                 { content => "publisher" },
                                                 { content => "pubstate" },
                                                 { content => "series" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "venue" },
                                                 { content => "volume" },
                                                 { content => "volumes" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "report" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "type" },
                                                 { content => "institution" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "isrn" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "number" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                                 { content => "version" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "thesis" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "type" },
                                                 { content => "institution" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "chapter" },
                                                 { content => "doi" },
                                                 { content => "eprint" },
                                                 { content => "eprintclass" },
                                                 { content => "eprinttype" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "pages" },
                                                 { content => "pagetotal" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "unpublished" }],
                                               field => [
                                                 { content => "author" },
                                                 { content => "title" },
                                                 { content => "day" },
                                                 { content => "endday" },
                                                 { content => "endmonth" },
                                                 { content => "endyear" },
                                                 { content => "month" },
                                                 { content => "year" },
                                                 { content => "addendum" },
                                                 { content => "howpublished" },
                                                 { content => "language" },
                                                 { content => "location" },
                                                 { content => "note" },
                                                 { content => "pubstate" },
                                                 { content => "subtitle" },
                                                 { content => "titleaddon" },
                                                 { content => "url" },
                                                 { content => "urlday" },
                                                 { content => "urlendday" },
                                                 { content => "urlendmonth" },
                                                 { content => "urlendyear" },
                                                 { content => "urlmonth" },
                                                 { content => "urlyear" },
                                               ],
                                             },
                                             {
                                               entrytype => [{ content => "xdata" }],
                                               field => [{ content => "ALL" }],
                                             },
                                           ],
                            entrytypes  => {
                                             entrytype => [
                                               { content => "article" },
                                               { content => "artwork" },
                                               { content => "audio" },
                                               { content => "bibnote" },
                                               { content => "book" },
                                               { content => "bookinbook" },
                                               { content => "booklet" },
                                               { content => "collection" },
                                               { content => "commentary" },
                                               { content => "customa" },
                                               { content => "customb" },
                                               { content => "customc" },
                                               { content => "customd" },
                                               { content => "custome" },
                                               { content => "customf" },
                                               { content => "inbook" },
                                               { content => "incollection" },
                                               { content => "inproceedings" },
                                               { content => "inreference" },
                                               { content => "image" },
                                               { content => "jurisdiction" },
                                               { content => "legal" },
                                               { content => "legislation" },
                                               { content => "letter" },
                                               { content => "manual" },
                                               { content => "misc" },
                                               { content => "movie" },
                                               { content => "music" },
                                               { content => "mvcollection" },
                                               { content => "mvbook" },
                                               { content => "online" },
                                               { content => "patent" },
                                               { content => "performance" },
                                               { content => "periodical" },
                                               { content => "proceedings" },
                                               { content => "reference" },
                                               { content => "report" },
                                               { content => "review" },
                                               { content => "set" },
                                               { content => "software" },
                                               { content => "standard" },
                                               { content => "suppbook" },
                                               { content => "suppcollection" },
                                               { content => "thesis" },
                                               { content => "unpublished" },
                                               { content => "video" },
                                               { content => "xdata" },
                                             ],
                                           },
                            fields      => {
                                             field => [
                                               { content => "abstract", datatype => "literal", fieldtype => "field" },
                                               { content => "addendum", datatype => "literal", fieldtype => "field" },
                                               { content => "afterword", datatype => "name", fieldtype => "list" },
                                               { content => "annotation", datatype => "literal", fieldtype => "field" },
                                               { content => "annotator", datatype => "name", fieldtype => "list" },
                                               { content => "author", datatype => "name", fieldtype => "list" },
                                               { content => "authortype", datatype => "key", fieldtype => "field" },
                                               { content => "bookauthor", datatype => "name", fieldtype => "list" },
                                               { content => "bookpagination", datatype => "key", fieldtype => "field" },
                                               { content => "booksubtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "booktitle", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "booktitleaddon",
                                                 datatype  => "literal",
                                                 fieldtype => "field",
                                               },
                                               { content => "chapter", datatype => "literal", fieldtype => "field" },
                                               { content => "commentator", datatype => "name", fieldtype => "list" },
                                               { content => "crossref", datatype => "entrykey", fieldtype => "field" },
                                               { content => "date", datatype => "date", fieldtype => "field" },
                                               { content => "day", datatype => "literal", fieldtype => "field" },
                                               { content => "doi", datatype => "verbatim", fieldtype => "field" },
                                               { content => "edition", datatype => "literal", fieldtype => "field" },
                                               { content => "editor", datatype => "name", fieldtype => "list" },
                                               { content => "editora", datatype => "name", fieldtype => "list" },
                                               { content => "editoratype", datatype => "key", fieldtype => "field" },
                                               { content => "editorb", datatype => "name", fieldtype => "list" },
                                               { content => "editorbtype", datatype => "key", fieldtype => "field" },
                                               { content => "editorc", datatype => "name", fieldtype => "list" },
                                               { content => "editorctype", datatype => "key", fieldtype => "field" },
                                               { content => "editortype", datatype => "key", fieldtype => "field" },
                                               { content => "eid", datatype => "literal", fieldtype => "field" },
                                               { content => "endday", datatype => "literal", fieldtype => "field" },
                                               { content => "endmonth", datatype => "datepart", fieldtype => "field" },
                                               {
                                                 content   => "endyear",
                                                 datatype  => "datepart",
                                                 fieldtype => "field",
                                                 nullok    => "true",
                                               },
                                               {
                                                 content     => "entryset",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               { content => "entrysubtype", datatype => "literal", fieldtype => "field" },
                                               { content => "eprint", datatype => "verbatim", fieldtype => "field" },
                                               { content => "eprintclass", datatype => "literal", fieldtype => "field" },
                                               { content => "eprinttype", datatype => "literal", fieldtype => "field" },
                                               { content => "eventdate", datatype => "date", fieldtype => "field" },
                                               { content => "eventday", datatype => "literal", fieldtype => "field" },
                                               { content => "eventendday", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "eventendmonth",
                                                 datatype  => "datepart",
                                                 fieldtype => "field",
                                               },
                                               {
                                                 content   => "eventendyear",
                                                 datatype  => "datepart",
                                                 fieldtype => "field",
                                                 nullok    => "true",
                                               },
                                               { content => "eventmonth", datatype => "datepart", fieldtype => "field" },
                                               { content => "eventtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "eventyear", datatype => "datepart", fieldtype => "field" },
                                               { content => "execute", datatype => "literal", fieldtype => "field" },
                                               { content => "file", datatype => "verbatim", fieldtype => "field" },
                                               { content => "foreword", datatype => "name", fieldtype => "list" },
                                               { content => "gender", datatype => "literal", fieldtype => "field" },
                                               { content => "holder", datatype => "name", fieldtype => "list" },
                                               { content => "howpublished", datatype => "literal", fieldtype => "field" },
                                               { content => "hyphenation", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "indexsorttitle",
                                                 datatype  => "literal",
                                                 fieldtype => "field",
                                               },
                                               { content => "indextitle", datatype => "literal", fieldtype => "field" },
                                               { content => "institution", datatype => "literal", fieldtype => "list" },
                                               { content => "introduction", datatype => "name", fieldtype => "list" },
                                               { content => "isan", datatype => "literal", fieldtype => "field" },
                                               { content => "isbn", datatype => "literal", fieldtype => "field" },
                                               { content => "ismn", datatype => "literal", fieldtype => "field" },
                                               { content => "isrn", datatype => "literal", fieldtype => "field" },
                                               { content => "issn", datatype => "literal", fieldtype => "field" },
                                               { content => "issue", datatype => "literal", fieldtype => "field" },
                                               { content => "issuesubtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "issuetitle", datatype => "literal", fieldtype => "field" },
                                               { content => "iswc", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "journalsubtitle",
                                                 datatype  => "literal",
                                                 fieldtype => "field",
                                               },
                                               { content => "journaltitle", datatype => "literal", fieldtype => "field" },
                                               { content => "keywords", datatype => "csv", fieldtype => "field" },
                                               { content => "label", datatype => "literal", fieldtype => "field" },
                                               { content => "language", datatype => "key", fieldtype => "list" },
                                               { content => "library", datatype => "literal", fieldtype => "field" },
                                               { content => "lista", datatype => "literal", fieldtype => "list" },
                                               { content => "listb", datatype => "literal", fieldtype => "list" },
                                               { content => "listc", datatype => "literal", fieldtype => "list" },
                                               { content => "listd", datatype => "literal", fieldtype => "list" },
                                               { content => "liste", datatype => "literal", fieldtype => "list" },
                                               { content => "listf", datatype => "literal", fieldtype => "list" },
                                               { content => "location", datatype => "literal", fieldtype => "list" },
                                               { content => "mainsubtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "maintitle", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "maintitleaddon",
                                                 datatype  => "literal",
                                                 fieldtype => "field",
                                               },
                                               { content => "month", datatype => "datepart", fieldtype => "field" },
                                               { content => "namea", datatype => "name", fieldtype => "list" },
                                               { content => "nameaddon", datatype => "literal", fieldtype => "field" },
                                               { content => "nameatype", datatype => "key", fieldtype => "field" },
                                               { content => "nameb", datatype => "name", fieldtype => "list" },
                                               { content => "namebtype", datatype => "key", fieldtype => "field" },
                                               { content => "namec", datatype => "name", fieldtype => "list" },
                                               { content => "namectype", datatype => "key", fieldtype => "field" },
                                               { content => "note", datatype => "literal", fieldtype => "field" },
                                               { content => "number", datatype => "literal", fieldtype => "field" },
                                               { content => "options", datatype => "csv", fieldtype => "field", skip_output => "true"},
                                               { content => "organization", datatype => "literal", fieldtype => "list" },
                                               { content => "origdate", datatype => "date", fieldtype => "field" },
                                               { content => "origday", datatype => "literal", fieldtype => "field" },
                                               { content => "origendday", datatype => "literal", fieldtype => "field" },
                                               { content => "origendmonth", datatype => "datepart", fieldtype => "field" },
                                               {
                                                 content   => "origendyear",
                                                 datatype  => "datepart",
                                                 fieldtype => "field",
                                                 nullok    => "true",
                                               },
                                               { content => "origlanguage", datatype => "key", fieldtype => "field" },
                                               { content => "origlocation", datatype => "literal", fieldtype => "list" },
                                               { content => "origmonth", datatype => "datepart", fieldtype => "field" },
                                               { content => "origpublisher", datatype => "literal", fieldtype => "list" },
                                               { content => "origtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "origyear", datatype => "datepart", fieldtype => "field" },
                                               { content => "pages", datatype => "range", fieldtype => "field" },
                                               { content => "pagetotal", datatype => "literal", fieldtype => "field" },
                                               { content => "pagination", datatype => "key", fieldtype => "field" },
                                               { content => "part", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content     => "presort",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               { content => "publisher", datatype => "literal", fieldtype => "list" },
                                               { content => "pubstate", datatype => "key", fieldtype => "field" },
                                               { content => "related", datatype => "literal", fieldtype => "field" },
                                               { content => "relatedtype", datatype => "literal", fieldtype => "field" },
                                               { content => "relatedstring", datatype => "literal", fieldtype => "field" },
                                               { content => "reprinttitle", datatype => "literal", fieldtype => "field" },
                                               { content => "series", datatype => "literal", fieldtype => "field" },
                                               { content => "shortauthor", datatype => "name", fieldtype => "list" },
                                               { content => "shorteditor", datatype => "name", fieldtype => "list" },
                                               { content => "shorthand", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content   => "shorthandintro",
                                                 datatype  => "literal",
                                                 fieldtype => "field",
                                               },
                                               { content => "shortjournal", datatype => "literal", fieldtype => "field" },
                                               { content => "shortseries", datatype => "literal", fieldtype => "field" },
                                               { content => "shorttitle", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content     => "sortkey",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               {
                                                 content     => "sortname",
                                                 datatype    => "name",
                                                 fieldtype   => "list",
                                                 skip_output => "true",
                                               },
                                               {
                                                 content     => "sorttitle",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               {
                                                 content     => "sortshorthand",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               {
                                                 content     => "sortyear",
                                                 datatype    => "literal",
                                                 fieldtype   => "field",
                                                 skip_output => "true",
                                               },
                                               { content => "subtitle", datatype => "literal", fieldtype => "field" },
                                               { content => "title", datatype => "literal", fieldtype => "field" },
                                               { content => "titleaddon", datatype => "literal", fieldtype => "field" },
                                               { content => "translator", datatype => "name", fieldtype => "list" },
                                               { content => "type", datatype => "key", fieldtype => "field" },
                                               { content => "url", datatype => "verbatim", fieldtype => "field" },
                                               { content => "urldate", datatype => "date", fieldtype => "field" },
                                               { content => "usera", datatype => "literal", fieldtype => "field" },
                                               { content => "userb", datatype => "literal", fieldtype => "field" },
                                               { content => "userc", datatype => "literal", fieldtype => "field" },
                                               { content => "userd", datatype => "literal", fieldtype => "field" },
                                               { content => "usere", datatype => "literal", fieldtype => "field" },
                                               { content => "userf", datatype => "literal", fieldtype => "field" },
                                               { content => "urlday", datatype => "literal", fieldtype => "field" },
                                               { content => "urlendday", datatype => "literal", fieldtype => "field" },
                                               { content => "urlendmonth", datatype => "datepart", fieldtype => "field" },
                                               {
                                                 content   => "urlendyear",
                                                 datatype  => "datepart",
                                                 fieldtype => "field",
                                                 nullok    => "true",
                                               },
                                               { content => "urlmonth", datatype => "datepart", fieldtype => "field" },
                                               { content => "urlyear", datatype => "datepart", fieldtype => "field" },
                                               { content => "venue", datatype => "literal", fieldtype => "field" },
                                               { content => "verba", datatype => "verbatim", fieldtype => "field" },
                                               { content => "verbb", datatype => "verbatim", fieldtype => "field" },
                                               { content => "verbc", datatype => "verbatim", fieldtype => "field" },
                                               { content => "version", datatype => "literal", fieldtype => "field" },
                                               { content => "volume", datatype => "literal", fieldtype => "field" },
                                               { content => "volumes", datatype => "literal", fieldtype => "field" },
                                               {
                                                 content     => "xdata",
                                                 datatype    => "entrykey",
                                                 fieldtype   => "list",
                                                 skip_output => "true",
                                               },
                                               { content => "xref", datatype => "entrykey", fieldtype => "field" },
                                               { content => "year", datatype => "datepart", fieldtype => "field" },
                                             ],
                                           },
                          },
);



# Set up some encoding aliases to map \inputen{c,x} encoding names to Encode
# It seems that inputen{c,x} has a different idea of nextstep than Encode
# so we push it to MacRoman
define_alias('ansinew'        => 'cp1252'); # inputenc alias for cp1252
define_alias('applemac'       => 'MacRoman');
define_alias('applemacce'     => 'MacCentralEurRoman');
define_alias('next'           => 'MacRoman');
define_alias('x-mac-roman'    => 'MacRoman');
define_alias('x-mac-centeuro' => 'MacCentralEurRoman');
define_alias('x-mac-cyrillic' => 'MacCyrillic');
define_alias('x-nextstep'     => 'MacRoman');
define_alias('x-ascii'        => 'ascii'); # Encode doesn't resolve this one by default
define_alias('lutf8'          => 'UTF-8'); # Luatex
define_alias('utf8x'          => 'UTF-8'); # UCS (old)

# Defines the scope of each of the BibLaTeX configuration options
#
# PRESORT is not a "real" biblatex option passed by biblatex. It is defined
# by the biblatex \DeclarePresort macro and is stored in here as it
# can be global/per-type or per-entry and therefore it's natural to store it here.
our %CONFIG_SCOPE_BIBLATEX = (
  alphaothers        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  controlversion     => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  debug              => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  datamodel          => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  dataonly           => {GLOBAL => 0, PER_TYPE => 0, PER_ENTRY => 1},
  displaymode        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  inheritance        => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  labelalpha         => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labelalphatemplate => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labelnamespec      => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labelnumber        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labeltitle         => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labeltitlespec     => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labelyear          => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  labelyearspec      => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  maxalphanames      => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  maxbibnames        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  maxcitenames       => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  maxitems           => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  minalphanames      => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  minbibnames        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  mincitenames       => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  minitems           => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  presort            => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  singletitle        => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  skipbib            => {GLOBAL => 0, PER_TYPE => 1, PER_ENTRY => 1},
  skiplab            => {GLOBAL => 0, PER_TYPE => 1, PER_ENTRY => 1},
  skiplos            => {GLOBAL => 0, PER_TYPE => 1, PER_ENTRY => 1},
  sortalphaothers    => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 0},
  sortexclusion      => {GLOBAL => 0, PER_TYPE => 1, PER_ENTRY => 0},
  sorting            => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  sortscheme         => {GLOBAL => 1, PER_TYPE => 0, PER_ENTRY => 0},
  uniquelist         => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  uniquename         => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  useauthor          => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  useeditor          => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  useprefix          => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
  usetranslator      => {GLOBAL => 1, PER_TYPE => 1, PER_ENTRY => 1},
);

# For per-entry options, what should be set when we find them and
# what should be output to the .bbl for biblatex.
# Basically, here we have to emulate relevant parts of biblatex's options processing
# for local entry-specific options, note therefore the presence here of some
# options like max/mincitenames which are not passed in the .bcf
our %CONFIG_BIBLATEX_PER_ENTRY_OPTIONS =  (
  dataonly      => {OUTPUT => 1, INPUT => ['skiplab', 'skiplos']},
  displaymode   => {OUTPUT => 0},
  maxitems      => {OUTPUT => 1},
  minitems      => {OUTPUT => 1},
  maxbibnames   => {OUTPUT => 1},
  minbibnames   => {OUTPUT => 1},
  maxcitenames  => {OUTPUT => 1},
  mincitenames  => {OUTPUT => 1},
  maxalphanames => {OUTPUT => 0},
  minalphanames => {OUTPUT => 0},
  maxnames      => {OUTPUT => ['maxcitenames', 'maxbibnames'], INPUT  => ['maxcitenames', 'maxbibnames']},
  minnames      => {OUTPUT => ['mincitenames', 'minbibnames'], INPUT  => ['mincitenames', 'minbibnames']},
  presort       => {OUTPUT => 0},
  skipbib       => {OUTPUT => 1},
  skiplab       => {OUTPUT => 1},
  skiplos       => {OUTPUT => 1},
  uniquelist    => {OUTPUT => 0},
  useauthor     => {OUTPUT => 1},
  useeditor     => {OUTPUT => 1},
  useprefix     => {OUTPUT => 1},
  usetranslator => {OUTPUT => 1},
);


1;

__END__

=pod

=encoding utf-8

=head1 NAME

Biber::Constants - global constants for biber

=head1 AUTHOR

Franois Charette, C<< <firmicus at ankabut.net> >>
Philip Kime C<< <philip at kime.org.uk> >>

=head1 BUGS

Please report any bugs or feature requests on our sourceforge tracker at
L<https://sourceforge.net/tracker2/?func=browse&group_id=228270>.

=head1 COPYRIGHT & LICENSE

Copyright 2009-2012 Franois Charette and Philip Kime, all rights reserved.

This module is free software.  You can redistribute it and/or
modify it under the terms of the Artistic License 2.0.

This program is distributed in the hope that it will be useful,
but without any warranty; without even the implied warranty of
merchantability or fitness for a particular purpose.

=cut
