* DONE biblatex firstinits option to giveninits
* DONE useprefix per names/name?
* DONE More flexible sorting allowing arbitrary name part order?
* DONE name taxonomy (first, middle, last) needs to be generalised. Internally in Biber too
** firstname -> given
** lastname -> family
** middlename -> middle
** prefix -> prefix
** suffix -> suffix
* DONE lastname mandatory relaxed? How about just mandatory that some part is defined since sorting isn't always on lastname first?
* DONE name parts and gender types in data model as constants
* DONE \keypart round \namepart
* DONE make namepart specs
** DONE named
** DONE selectable per sortlist
*** TODO abx@aux@sortscheme etc. probably this needs to be generalised to mentioned refcontexts
** DONE per-entry
** DONE per-namelist, per name
* DONE hashes use static construction from DM name constants - problem with uniquelist
* DONE tool mode bltx output should write schema but controlled by option (normal output uses same option)
* DONE per-names/name options are not in .bcf - matters?
* DONE per-namelists/per-name options
** DONE needs per names/name support in biblatex and in bbl
** DONE sortnamekeyscheme needs per entry/names/name in bbl
** DONE biblatex macro support in formats for sortnamekeyscheme
** DONE What to do with gender attribute on name?
* DONE Document example in biblatex manual of compound keypart
* DONE implement patronymic namepart example
* DONE Document year/month (datepart fields) are not allowed in bltxml
* DONE Sorting
** OM/GRT enhancememts?
** Some integer tests with <=>?
* DONE Transliteration interface
** Waiting for L::T release then make this a dep.
* DONE Year is missing for knuth:ct in sorting.t?
* DONE biblatexml.pm date parsing
* DONE BCE, circa etc.
** In bbl/bblxml output
*** year should be yearabs
*** new *dateera={beforecommonera/commonera} and these should be localisation strings
** datezeros needs to force zeros, not just assume, then testoutput again
* DONE biblatex output for date metadata
* DONE biblatex input for date metadata
* DONE enforce date field naming - where?
* DONE datezeros needs to force zeros
* DONE biblatex new test doc
* DONE docs - negs, explicit era versions, bce bool, locale strings, circa/uncertain format and bools
* DONE Test negative date sorting
* DONE Volume and ? to ints and remove padding?
* DONE Enforce year/month format as ints - sortyear should be int only and documented so. Enforce in biber (not datamodel as it's not part of that)
* DONE final sort elements copy string into all further fields which dies on int schema
* DONE Tune ...
* DONE Remove/convert fastsort?
* DONE Decomm RIS
* DONE Eras/circa/uncertain in cites
* DONE uniquename and initstrings etc. for xname should use DM and no explicit nameparts.
  ** Config.pm read for unt
  ** Document \DeclareUniquenameTemplate, add to release notes, add to XSLT
* DONE useprefix namelist and name scope with bibtex
* DONE LabelalphaNameTemplate implementation
** DONE .bcf read
** DONE config.pm opt read
** DONE compound, strwidth replace pstrwidth, pcompound and compound
** DONE xsl update
** DONE Doc - move pstrwidth (remove) -> strwidth, pcompound (remove) -> compound, strwidth on lant overrides on lat
* DONE sortgiveninits
** DONE Should be moved to option of \namepart in SNKS
** DONE Remove biber option and make biblatex deprecated
** DONE Fix in Internals, Remove from Constants.pm and Config.pm
** DONE Change schema, .bcfs, xsl, doc
* DONE giveninits should be autogen and <name>inits
** DONE Doc (including scope)
* DONE 'given' in _getnamehash_u in Internals - can be abstracted?
* DONE nullable_check in Biber.pm - needed? It's a deep loop
* DONE donames stuff is messy
* DONE hash/fullhash for all names
* DONE Implement EDTF Date/Times
** DONE circa/uncertain/era should apply to individual dates, not the range.
** DONE 5.2.5 - seasons - new field (not in DM, only from date parsing), containing localisation string
** DONE iso8601 -> EDTF in biblatex with fallback 
** DONE < year for CE/AD
** DONE Document *season and all label* new fields
** DONE cite in 96 is circa xxxx-yyyy instead of circa xxxx-circa yyyy
*** DONE Document mkday,month,yearzeros, changes
** DONE 5.2.2 - expand to ranges in biber and put in \Xdateuncertain{}
*** DONE biblatex unspec
*** DONE Document, remove 5.2.2 exclusion 96-test
** DONE Default for era
*** DONE edtf toggle can be removed (not tests - see below)
*** DONE Make a 'simple' option for dateera, default
*** DONE make a value for dateera that can be tested, perhaps usermode too
*** DONE convert edtf toggle tests to check for 'simple'
*** DONE This will need to be added to mkranges like labelname but for edtf, no choice as now
*** Doc, 96
** DONE Putting all date meta things into labeldate resolution breaks the ability to treat labeldate parts as normal datepart fields. They shouldn't be applied there really - when they hit forcezeros etc. they cause an error. When they are simpler, forcezeros etc. can have \IfInteger to skip "nodate" etc. labeldate part values. However, labelyear printing in authoryear cites is already processed into a range etc. This probably shouldn't be the case any more so that labelyear is more easily processing like other years.
** DONE times
*** DONE Option to decide TZ format (none, "EST", num). Get rid of "floating" in bbl
*** DONE timezeros option?
*** DONE \mktimezeros - needs options like mkdatezeros? probably not as each component is 2 digits
*** DONE option labeldate makes time fields available
*** DONE \bibtimesep, \bibtimezonesep AM PM strings
*** DONE TZ display option
*** DONE formats - 24hour (normal and compressed), 12 hour am/pm (localised)
*** DONE Document *time={HH,HHcomp,hh} opts and formats, timelabel, alltimes, Expand bib:use:dat to include times. Format docs in aut:fmt:ich
* DONE EDTF should set dateera=simple and use \dateeraprintpre/\enddateeraprintpre
* DONE dateera=simple should -1 all bce years on output
** DONE Remove yearabs from biber, biblatex needs to +1 all bce abs values on output when dateera is not "astronomical"
** DONE fix biber tests
** DONE Fix spaces in cites, run tests, upload, reply
* DONE bibtex output only works on bibtex input data as it uses ->rawfields - should be able to base it on biblatexml output
** DONE name to bib and name to xnamebib in Name.pm
** DONE Name lists "and others"
** DONE name list output should use namesep option value
** DONE name list output needs to care about x vs normal for per-namelist options.
** DONE error could be raw fields which are found by get_field?
** DONE *seps should have separate output versions, same as input ones
** DONE Output annotations
** DONE Order of fields needs to be determined
** DONE Document all in biber manual, add output_xname, output_*sep to the table there
** DONE Remove raw and references to raw
** DONE Check idiosyncratic fields in input bibtex.pm like keywords etc.
** DONE Tool tests with --output-xname
* DONE Julian cutoff
** DONE cutoff option *must* be YYYY-MM-DD. Can be true or custom date. Document. Examples.
** DONE Passed in .bcf, probably no need to update schema if simple option. Must be in .bcf data model as global option.
** DONE Biber needs to put a *(end)datejulian boolean in the .bbl
** DONE Define \if*(end)datejulian and \if(end)datejulian tests
* DONE datelabel has to become labeldate somehow, for consistency
* DONE Times - more work
** DONE Add to EDTF
** DONE Add time output to standard formats (don't forget ranges in .lbx)
*** DONE bibdatetimesp should be space by default for non EDTF output
** DONE Document \print*time are stand-alone time prints and \printdate will print times if *dateusetime is set
** DONE Document *dateusetime, labeldateusetime, alldatesusetime and \bibdatetimesep
** DONE Add *dateusetime, labeldateusetime, alldatesusetime to scope table in doc
** DONE Document that the *usetime options do nothing with compact date range formats as this would be confusing.
** DONE New output format like EDTF but options
* DONE extrayear, (namestring, namestrings, namedisschema)->uniquelist, uniquename
* DONE biblatexml.pm needs uniquenametemplate processing removing
* DONE sorting scheme names are not used. Create multiple and refer by name as with other dlist
* DONE presort, exclude and include should not be inside a sorting spec
* DONE ISO8601:2016
** DONE Refer to biblatex date format in docs as ISO8601-201? Part 2, Clause 4 Extended Format
** DONE Replace all EDTF refs in comments with ISO8601-2:2016
** DONE Need to define the profile and conformance to the various level 1 and level 2 features (see 4.1.2)
** DONE Uncertain+approximate ('?~') is now '%'
** DONE Unspecified 'u' is now 'X'
** DONE unknown, * -> missing, open -> ..
** DONE 'circa' should become 'approximate' to align with ISO8601
* DONE Look into variable length look/behinds in decode: http://www.drregex.com/2019/02/variable-length-lookbehinds-actually.html
* DONE New sourcemap verb fieldsource=cited/nocited?
* DONE XDATA generalisation
** DONE tool output
*** DONE tests with resolve/non resolve and output seps change
*** DONE output_xdatasep in tool mode
** DONE Document
*** DONE Default position when omitted for list sources is 1
*** DONE granular xdata doesn't work for dates
*** DONE granular xdata at field level and below must be between same field and datatypes
* TODO Multiscript
** TODO default mslang for field selection is global->refcontext->entry, what about field items?
** TODO LANGIDOPTS and how they interact with LANGID->mslang
** DONE Documentation
*** DONE \fieldmsforms{fieldname} \fieldmslangs{fieldname} (only in formats)
*** DONE \currentmsforms and  \curentmslangs (only in formats)
*** DONE Annotation macros + MS args
*** DONE NAMEnamehash, NAMEbibnamehash NAMEfullhas etc. are now NAMEFORMLANGnamehash and NAMEFORMLANGbibnamehash (also doc in changes as incompat change)
*** DONE CHANGES - breaking get/has/if*annotation have opt args as #1 and #2 and so need defaulting if not present [][]
*** DONE \printfield
*** DONE \printlist*
*** DONE \printname
*** DONE \iffieldundef (doc that tests for any alternates with no ms args)
*** DONE \ifmsentryfield
*** DONE \currentmsform \currentmslang only defined for MS fields
*** DONE langtags annotation overrides entry/field language
*** DONE \DeclareDatamodelMultiscriptEntryfields and \ResetDatamodelMultiscriptEntryfields
*** DONE multiscriptforms constant
*** DONE 'langtags' special annotation name.
*** DONE msform/mslang biblatex global options. The options control which alternates are selected in various templates by biber and which alternates are selected by \cites/\print* in refcontexts.
*** DONE msform/mslang refcontext options to select the defaults for \printfield and cites etc. Don't need to be passed to biber via .bcf as the biber needs for mslang/msform are already addressed as they indirectly change the current refcontext templates which in turn changes data. These options are there to influence the biblatex side of things. Default to globals.
*** DONE biber mslang option and that this is checked after biblatex global/entry(LANGID) (for tool mode use)
*** DONE \field in \DeclareLabelalphaTemplate to say that non-name list fields apply the template to each list member
*** DONE Inheritance is of all alternates
*** DONE msstrict and LANGID->mslang
*** DONE where to put name:langswitchon/off in custom name formats (after name:delim, see .def)
*** DONE Add to general docs
**** TODO general citation/print*/if*
*** DONE Default global mslang to main document language BCP47 tag equivalent

** TODO biblatex
*** DONE Datamodel
**** DONE Add valid multiscript fields to datamodel
**** DONE Add new datamodel constant list of default forms (original, transliteration, transcription, translation)
*** DONE msform and mslang biblatex global options
*** DONE msform and mslang biblatex refcontext options (but not passed to biber), inherit from global
*** DONE around 4560 in biblatex.sty - add mslang name option and set some macro, expose to user
*** DONE sorting templates
*** DONE labelalphatemplate
*** DONE labelnamespec/labeltitlespec
*** DONE Xsource fields need to be \fieldsource and have two optional args. #1source calls audit
*** DONE \blx@bbl@msformsdef and  \blx@bbl@mslangsdef are csvs of all forms/langs used for loading langs
*** DONE Save list of forms and langs per entry@field and make user macros
*** DONE plain lists per-item - move switching like names to formats
*** DONE multiscript fields/lists/names
**** DONE blx@bbl@msdef@i
**** DONE \printfield
**** DONE \printlist
**** DONE \printname
**** DONE \iffieldundef
**** DONE langtags annotation override for print*
**** DONE indexfield
**** DONE indexlist
**** DONE indexname
**** DONE \blx@imc@thefield
**** DONE \blx@imc@strfield
**** DONE \blx@imc@usefield
**** DONE \blx@imc@thelist
**** DONE \blx@imc@strlist
**** DONE \blx@imc@thefirstlistitem
**** DONE \blx@imc@strfirstlistitem
**** DONE \blx@imc@usefirstlistitem
**** DONE \blx@imc@thename
**** DONE \blx@imc@strname
**** DONE \blx@imc@clearfield (must provide both form/lang or neither)
**** DONE \blx@imc@clearlist (must provide both form/lang or neither)
**** DONE \blx@imc@clearname (must provide both form/lang or neither)
**** DONE \blx@savename
**** DONE \blx@savelist
**** DONE \blx@savefield
**** DONE blx@imc@savefield
**** DONE blx@imc@savelist
**** DONE blx@imc@savename
**** DONE blx@imc@savefieldcs
**** DONE blx@imc@savelistcs
**** DONE blx@imc@savenamecs
**** DONE \blx@imc@restorefield
**** DONE \blx@imc@restorelist
**** DONE \blx@imc@restorename
**** DONE \blx@imc@iffieldsequal
**** DONE \blx@imc@iflistssequal
**** DONE \blx@imc@ifnamesequal
**** DONE \blx@imc@iffieldequals
**** DONE \blx@imc@iflistequals
**** DONE \blx@imc@ifnameequals
**** DONE \blx@imc@iffieldequalcs
**** DONE \blx@imc@iflistequalcs
**** DONE \blx@imc@ifnameequalcs
**** DONE \blx@imc@iffieldequalstr
**** DONE \blx@iffieldxref
**** DONE \blx@iflistxref
**** DONE \blx@ifnamexref
**** DONE \citefield
**** DONE \citelist
**** DONE \citename
**** DONE \blx@imc@docsvfield
**** DONE \blx@imc@forcsvfield
**** DONE \blx@imc@iffieldint
**** DONE \blx@imc@iffieldnum
**** DONE \blx@imc@iffieldnums
**** DONE \blx@imc@iffieldpages
**** DONE \blx@imc@iffieldbibstring
**** DONE \blx@imc@iffieldplusstringbibstring
**** DONE \blx@imc@iflistequals
**** DONE \blx@imc@iffieldxref
**** DONE \blx@imc@iflistxref
**** DONE \blx@imc@ifnamexref
**** DONE \DeprecateField
**** DONE \DeprecateList
**** DONE \DeprecateName
**** DONE \blx@bbl@titles
**** DONE \DeprecateFieldWithReplacement
**** DONE \DeprecateListWithReplacement
**** DONE \DeprecateNameWithReplacement
**** DONE Add namepart alternates to name and list formats
*** DONE Default global mslang to main document language BCP47 tag equivalent
*** DONE blx@TE@hook definitions for modified macros
*** TODO output sortlocale in .bcf as BCP-47 when possible (polyglossia 1.47+/babel?)
*** TODO lang switch for overrides (not working for shorthands for bblend macros still)

*** TODO \blx@msselect{ja-jp}{transcription}{ja-hira}, \blx@msselect{ja-jp}{transliteration}{ja-lat}, add \blx@msselect{langtag}{default}{langtag} from \msentrylangs, keep mslang from langid in getdata, put in pre-filter to xparse defaults to check these from \ms???{\maplang{\blx@mslang}}{}{} to set actual \blx@msform and \blx@mslang
*** TODO User interface to \blx@msselect and doc
** DONE biber
*** TODO inserted related fields should inherit the parent default mslang and if different mslang to parent, insert a langtags annotation for switching.
*** DONE remove LOCALE_MAP_R in biber, move to biblatex and provide override for BCP47->babel until comprehensive package for this (or babel/polyglossia support BCP47). Remove msmaplangs output in biber and reading in biblatex, replace use of this in biblatex with new interface, change doc which uses BCP47 in langid
*** DONE cleardata/resetdata - fieldsources, annotations and msnameparts
*** DONE grouping around nested \dos
*** DONE form= and lang= in maps
**** DONE fix error in multiscript test when _fr is changed to _es
**** DONE Put in map in multiscript.bcf to change _es to _fr
**** DONE Add map_field_source/target_form/lang to biblatex output and document
*** DONE Decomm DOT output
*** DONE Parsing BCP47 function https://tools.ietf.org/html/bcp47
*** DONE Names and lists
**** DONE Need new List object
**** DONE Namelists need msform and mslang accessor for items
**** DONE Lists need msform and mslang accessor for items
**** DONE Both need these populating on data read with inherit/override of FieldValue default by annotations
*** DONE FieldValue object
*** DONE xdata needs forms and langs
*** DONE Check for valid forms on first parsing
*** DONE What to do for invalid langtags?
*** DONE biblatexml input
*** DONE bibtex output
*** DONE biblatexml output
*** DONE labelnamespec/labeltitlespec
**** DONE form/lang in labelnamespec is not working - lots of errors
**** DONE .bcf schema
**** DONE XSL
*** DONE labelnamesource/labeltitlesource
*** DONE Xnamehash, Xbibnamehash need generalising for alternates (~2695 in Biber.pm) and in bbl/bblxml output. Then these macros need different parsing in biblatex
*** DONE bblxml output
**** DONE labelnamesource/labeltitlesource need form/lang outputting and schema changing for bblxml
*** DONE bbl output
**** DONE langtags annotations for names go into mslang option in the name and .bbl (as well as annotions) (->nth_mslang)
**** DONE DataList.pm needs alternates loops (instantiate_entry())
*** DONE inheritance templates
*** DONE sorting templates
*** DONE labelalphatemplate
*** DONE audit of field subs
**** DONE set_field()
**** DONE set_datafield()
**** DONE get_field()
**** DONE get_datafield()
**** DONE field_exists()
*** DONE Add inheritance test to multiscript.t
*** DONE xsl for sorting/labelalpha templates
*** DONE elide form/lang on output when default? No.
*** DONE fix all test outputs

        
  
